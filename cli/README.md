# Intmax2 

## Usage

The general syntax for using the CLI tool is:

```
intmax2-cli <COMMAND> [OPTIONS]
```

### Available Commands

1. **Transaction (tx)**
   
   Send a transaction to another address.

   ```
   intmax2-cli tx --block_builder_url <BLOCK_BUILDER_URL>  --private-key <PRIVATE_KEY> --to <RECIPIENT_ADDRESS> --amount <AMOUNT> --token-index <TOKEN_INDEX>
   ```

2. **Deposit**
   
   Deposit funds into the Intmax2 system.

   ```
   intmax2-cli deposit --rpc-url <RPC_URL> --eth-private-key <ETH_PRIVATE_KEY> --private-key <PRIVATE_KEY> --amount <AMOUNT> --token-index <TOKEN_INDEX>
   ```

3. **Sync**
   
   Synchronize your account with the latest state.

   ```
   intmax2-cli sync --private-key <PRIVATE_KEY>
   ```

4. **Balance**
   
   Check the balance of your account.

   ```
   intmax2-cli balance --private-key <PRIVATE_KEY>
   ```

### Options

- `--block_builder_url`: URL of the block builder
- `--private-key`: Your private key (in H256 format)
- `--to`: Recipient's address (in H256 format)
- `--amount`: Amount to send or deposit (in U256 format)
- `--token-index`: Index of the token (u32)
- `--rpc-url`: URL of the Ethereum RPC node
- `--eth-private-key`: Ethereum private key for deposits (in H256 format)

## Examples

Please set `BASE_URL` environment variable. 
You can replace private keys with what you generated by `cargo run -r -- generate-key`.

1. Make a deposit:
   ```
   cargo run -r --  deposit --private-key 0x186aab4d91978e03f84890147e0e4bc114c8188588deb2c58bd877f5911ad78c --amount 100000000 --token-index 0
   ```

   1.1. Post an empty block and sync validity proof (This is not used in production):
      ```
      cargo run -r -- post-empty-and-sync
      ```

2. Check your balance:
   ```
   cargo run -r -- balance --private-key 0x186aab4d91978e03f84890147e0e4bc114c8188588deb2c58bd877f5911ad78c
   ```
3. Send a transaction:
   ```
   cargo run -r -- tx --private-key 0x186aab4d91978e03f84890147e0e4bc114c8188588deb2c58bd877f5911ad78c --to 0x2cba397f839b10e62cce4ef49dcea6edac416fa1b97e24405ca3e1a5313dce1b --amount 1 --token-index 0 
   ```
   3.1. Post a block and sync validity proof after the tx command (This is not used in production):
      ```
      cargo run -r -- post-and-sync
      ```

4. Check receiver's balance:
   ```
   cargo run -r -- balance --private-key 0x0c8790b509975a7fa4a0ebf2dfbd75e7eea2b44789a48cac629567bbaf680646
   ```